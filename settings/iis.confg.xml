<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<system.webServer>
		<rewrite>
			<rules>
                <clear />
                <rule name="files" enabled="true" patternSyntax="Wildcard" stopProcessing="true">
                    <match url="*files/*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="Rewrite" url="http://10.10.7.101:8050/{R:0}" />
                </rule>
                <rule name="dev-api" patternSyntax="Wildcard" stopProcessing="true">
                    <match url="*dev-api/*" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="Rewrite" url="http://10.10.7.101:8050/{R:2}" appendQueryString="true" logRewrittenUrl="true" />
                </rule>
                <rule name="index">
                    <match url="^((?!(api)).)*$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.html" />
                </rule>
			</rules>
            <rewriteMaps>
                <rewriteMap name="/dev-api">
                    <add key="/dev-api" value="http://10.10.7.101:8050" />
                </rewriteMap>
            </rewriteMaps>
		</rewrite>
	</system.webServer>
</configuration>
